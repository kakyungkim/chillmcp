#!/usr/bin/env python3
"""ChillMCP μ„λ²„ ν…μ¤νΈ ν΄λΌμ΄μ–ΈνΈ"""

import asyncio
from mcp.client.session import ClientSession
from mcp.client.stdio import stdio_client, StdioServerParameters

async def test_server():
    """μ„λ²„ ν…μ¤νΈ"""
    
    # μ„λ²„ νλΌλ―Έν„° μ„¤μ • (μ»¤μ¤ν…€ νλΌλ―Έν„° ν¬ν•¨)
    server_params = StdioServerParameters(
        command="python",
        args=["main.py", "--boss_alertness", "80", "--boss_alertness_cooldown", "60"],
        env=None
    )
    
    print("π” ChillMCP μ„λ²„μ— μ—°κ²° μ¤‘...")
    
    async with stdio_client(server_params) as (read, write):
        async with ClientSession(read, write) as session:
            # μ„λ²„ μ΄κΈ°ν™”
            await session.initialize()
            print("β… μ„λ²„ μ΄κΈ°ν™” μ™„λ£\n")
            
            # μ‚¬μ© κ°€λ¥ν• λ„κµ¬ λ©λ΅ ν™•μΈ
            tools = await session.list_tools()
            print(f"π“‹ μ‚¬μ© κ°€λ¥ν• λ„κµ¬: {len(tools.tools)}κ°")
            for tool in tools.tools:
                print(f"   - {tool.name}: {tool.description}")
            print()
            
            # λ„κµ¬ ν…μ¤νΈ 1: take_a_break
            print("=" * 60)
            print("π§ ν…μ¤νΈ 1: take_a_break")
            print("=" * 60)
            result = await session.call_tool("take_a_break", arguments={"duration": 5})
            print(f"{result.content[0].text}\n")
            
            # λ„κµ¬ ν…μ¤νΈ 2: watch_netflix
            print("=" * 60)
            print("π§ ν…μ¤νΈ 2: watch_netflix")
            print("=" * 60)
            result = await session.call_tool("watch_netflix", arguments={"show": "μ¤μ§•μ–΄ κ²μ„"})
            print(f"{result.content[0].text}\n")
            
            # λ„κµ¬ ν…μ¤νΈ 3: bathroom_break
            print("=" * 60)
            print("π§ ν…μ¤νΈ 3: bathroom_break")
            print("=" * 60)
            result = await session.call_tool("bathroom_break", arguments={})
            print(f"{result.content[0].text}\n")
            
            # λ„κµ¬ ν…μ¤νΈ 4: coffee_mission
            print("=" * 60)
            print("π§ ν…μ¤νΈ 4: coffee_mission")
            print("=" * 60)
            result = await session.call_tool("coffee_mission", arguments={"coffee_type": "μ•„λ©”λ¦¬μΉ΄λ…Έ"})
            print(f"{result.content[0].text}\n")
            
            # λ„κµ¬ ν…μ¤νΈ 5: urgent_call
            print("=" * 60)
            print("π§ ν…μ¤νΈ 5: urgent_call")
            print("=" * 60)
            result = await session.call_tool("urgent_call", arguments={})
            print(f"{result.content[0].text}\n")
            
            # λ„κµ¬ ν…μ¤νΈ 6: deep_thinking
            print("=" * 60)
            print("π§ ν…μ¤νΈ 6: deep_thinking")
            print("=" * 60)
            result = await session.call_tool("deep_thinking", arguments={})
            print(f"{result.content[0].text}\n")
            
            # λ„κµ¬ ν…μ¤νΈ 7: email_organizing
            print("=" * 60)
            print("π§ ν…μ¤νΈ 7: email_organizing")
            print("=" * 60)
            result = await session.call_tool("email_organizing", arguments={"shopping_item": "λ…ΈνΈλ¶ κ±°μΉλ€"})
            print(f"{result.content[0].text}\n")
            
            # λ„κµ¬ ν…μ¤νΈ 8: show_meme
            print("=" * 60)
            print("π§ ν…μ¤νΈ 8: show_meme")
            print("=" * 60)
            result = await session.call_tool("show_meme", arguments={"category": "κ³ μ–‘μ΄"})
            print(f"{result.content[0].text}\n")
            
            print("=" * 60)
            print("β… λ¨λ“  ν…μ¤νΈ μ™„λ£!")
            print("=" * 60)

if __name__ == "__main__":
    asyncio.run(test_server())

